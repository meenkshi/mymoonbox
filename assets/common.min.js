const announcementWraper=document.getElementById("announcement-bar"),announcementBtn=document.querySelector(".announcement-bar__btn"),menuBtn=document.querySelector(".burger-menu__btn"),menuClose=document.querySelector(".burger-menu__close"),body=document.querySelector("body"),burgerMenu=document.querySelector(".burger-menu__wrapper");announcementBtn.addEventListener("click",(function(){announcementWraper.style.display="none"})),menuBtn.addEventListener("click",(function(){burgerMenu.classList.add("active"),body.classList.add("menu__open")})),menuClose.addEventListener("click",(function(){burgerMenu.classList.remove("active"),body.classList.remove("menu__open")}));const swiperBar=new Swiper(".announcement__swiper",{centeredSlides:!1,loop:!0,slidesPerView:"auto",autoplay:{delay:4e3}}),initAccordion=()=>{const e=document.querySelectorAll(".accordion");e.length&&e.forEach((e=>{const t=e.querySelectorAll(".accordion__btn"),n=e.querySelectorAll(".accordion__item");t.forEach((e=>{const t=e.closest(".accordion__item"),o=e.closest(".accordion__item").querySelector(".accordion__content");e.addEventListener("click",(()=>{n.forEach((e=>{e.classList.contains("open")&&e!==t&&(e.classList.remove("open"),e.querySelector(".accordion__content").style.maxHeight=null)})),t.classList.contains("open")?(t.classList.remove("open"),o.style.maxHeight=null):(t.classList.add("open"),o.style.maxHeight=o.scrollHeight+"px")}))}))}))};initAccordion();const timeoutAction=()=>{const e=document.querySelectorAll(".landing-timer");e.length&&e.forEach((e=>{const t=e.querySelector(".landing-timer__message"),n=e.querySelector(".product-form"),o=e.querySelector(".landing-timer__score");!function(o){const r=e.querySelector(".days"),c=e.querySelector(".hours"),s=e.querySelector(".minutes"),a=e.querySelector(".seconds");function i(){let e=function(e){let t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),r=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:r,minutes:o,seconds:n}}(o);if(r.innerHTML=e.days+"0",c.innerHTML=("0"+e.hours).slice(-2),s.innerHTML=("0"+e.minutes).slice(-2),a.innerHTML=("0"+e.seconds).slice(-2),e.total<=0)return n.classList.contains("hide")||t.classList.contains("show")?(n.classList.remove("hide"),t.classList.remove("show")):(n.classList.add("hide"),t.classList.add("show")),clearInterval(l),!0}i();const l=setInterval(i,1e3)}(new Date(Date.parse(new Date)+60*o.value*60*1e3))}))};timeoutAction();const initDiagram=()=>{const e=document.querySelectorAll(".landing-diagram");e.length&&e.forEach((e=>{const t=e.querySelectorAll(".landing-diagram__bg");t.length&&window.addEventListener("scroll",(()=>{const n=e.offsetTop,o=e.offsetTop+e.offsetHeight,r=window.pageYOffset;n+200<window.pageYOffset+window.innerHeight&&o+200>r&&t.forEach((e=>{const t=e.closest(".landing-diagram__bg-wrapper").querySelector("input").value;e.style.maxWidth=t+"%"}))}))}))};if(initDiagram(),document.querySelectorAll(".landing-diagram__items").length){const e=document.querySelectorAll(".landing-diagram__item"),t=document.querySelector(".landing-diagram__items"),n=200;let o;window.addEventListener("scroll",(()=>{const r=window.matchMedia("(max-width: 768px)"),c=t.offsetTop,s=t.offsetTop+t.offsetHeight,a=window.pageYOffset,i=window.pageYOffset+window.innerHeight;c+n<i&&s+n>a&&1==!o&&(t.classList.add("show-block"),e.forEach((e=>{let t;const n=e.querySelector("input").value;function o(){let e=t.r.baseVal.value,o=2*Math.PI*e,r=0;t.style.strokeDasharray=`${o} ${o}`,t.style.strokeDashoffset=o;const c=setInterval((function(){if(r>=n)clearInterval(c);else{r++;let e=o-r/100*o;t.style.strokeDashoffset=e}}),1)}const c=()=>{t=r.matches?e.querySelector(".progress-ring__circle.mobile"):e.querySelector(".progress-ring__circle"),o()};r.addListener(c),c(),o()})),o=1)}))}const findUserName=()=>{const e=document.querySelectorAll(".url-name");e.length&&e.forEach((e=>{const t=window.location.search.replace("?","").split("&").reduce((function(e,t){const n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e}),{});t.name&&(e.classList.contains("name-after")?e.innerHTML=t.name+"?..":e.innerHTML=t.name+", ")}))};findUserName();const addToCartAnalitycs=()=>{const e=document.querySelectorAll(".product-form");e.length&&document.addEventListener("quizKitAddToCartSuccess",(function(t){console.log(t.detail),e.forEach((function(e){const t=(e.querySelector('input[name="product-price"]').value/100).toFixed(2),n=e.querySelector('input[name="product-variant-id"]').value;e.addEventListener("submit",(function(){fetch("https://api.quizkitapp.com/api/v1/quizzes/5824/add-to-cart",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({price:t,variantId:n,source:"quiz_result"})}).then((e=>e.json())).then((e=>console.log(JSON.stringify(e))))}))}))}),!1)};addToCartAnalitycs();